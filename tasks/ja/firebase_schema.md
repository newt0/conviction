ä»¥ä¸‹ã¯ã€ConvictionFi ã®æŠ€è¡“ä»•æ§˜ãƒ»ER å›³ã‚’ã‚‚ã¨ã«æ§‹æˆã—ãŸ **Firebase Firestore ç”¨ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ**ã§ã™ã€‚å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹é€ ã¨ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’æ˜ç¢ºã«ã—ã€Web2 ã‚¢ãƒ—ãƒªï¼ˆNext.js + Firebaseï¼‰ã§ã®é«˜é€Ÿè¡¨ç¤ºã‚„é€šçŸ¥å‡¦ç†ã«æœ€é©åŒ–ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ”§ Firestore ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆï¼ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ & ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰

### ğŸŸ¦ usersï¼ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰       | å‹        | èª¬æ˜                       |
| ---------------- | --------- | -------------------------- |
| `id`             | string    | Privy IDï¼ˆUIDï¼‰            |
| `twitter_handle` | string    | ã‚½ãƒ¼ã‚·ãƒ£ãƒ«é€£æºã‚¢ã‚«ã‚¦ãƒ³ãƒˆ   |
| `email`          | string    | ç™»éŒ²ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä»»æ„ï¼‰ |
| `created_at`     | timestamp | ç™»éŒ²æ—¥æ™‚                   |
| `last_login_at`  | timestamp | æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ™‚åˆ»           |

---

### ğŸŸ© nftsï¼ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰â€»ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚‚ OK

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰             | å‹        | èª¬æ˜                                   |
| ---------------------- | --------- | -------------------------------------- |
| `id`                   | string    | NFT ãƒˆãƒ¼ã‚¯ãƒ³ ID                        |
| `owner_id`             | string    | users.idï¼ˆãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰               |
| `strategy_name`        | string    | è¡¨ç¤ºç”¨æˆ¦ç•¥å                           |
| `metadata_url`         | string    | Walrus ä¸Šã® JSON ãƒªãƒ³ã‚¯                |
| `agent_wallet_address` | string    | Sui ä¸Šã® SC ã‚¦ã‚©ãƒ¬ãƒƒãƒˆ                 |
| `minted_at`            | timestamp | ãƒŸãƒ³ãƒˆæ™‚åˆ»                             |
| `status`               | string    | `active` / `paused` / `withdrawn` ãªã© |

---

### ğŸŸ¨ walletsï¼ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ or ã‚µãƒ–ã‚³ãƒ¬ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰       | å‹        | èª¬æ˜                 |
| ---------------- | --------- | -------------------- |
| `wallet_address` | string    | Sui ã®ã‚¢ãƒ‰ãƒ¬ã‚¹       |
| `nft_id`         | string    | å¯¾è±¡ NFT ã® ID       |
| `balance`        | number    | USDC ãªã©ã®ç¾åœ¨æ®‹é«˜  |
| `pnl_total`      | number    | ç´¯ç©æç›Šï¼ˆãƒ‰ãƒ«æ›ç®—ï¼‰ |
| `last_updated`   | timestamp | æœ€çµ‚å–å¾—æ™‚åˆ»         |

---

### ğŸŸ¥ tx_logsï¼ˆã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼š`nfts/{nftId}/tx_logs`ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰    | å‹        | èª¬æ˜                           |
| ------------- | --------- | ------------------------------ |
| `tx_hash`     | string    | Sui ä¸Šã® Tx Hash               |
| `action_type` | string    | `swap`, `stake`, `withdraw` ç­‰ |
| `amount`      | number    | å®Ÿè¡Œã•ã‚ŒãŸé‡                   |
| `token`       | string    | å¯¾è±¡ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆä¾‹ï¼šUSDCï¼‰       |
| `executed_at` | timestamp | å®Ÿè¡Œæ—¥æ™‚                       |

---

### ğŸŸ§ notification_logsï¼ˆã‚µãƒ–ã‚³ãƒ¬ï¼š`nfts/{nftId}/notifications`ï¼‰

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹        | èª¬æ˜                           |
| ---------- | --------- | ------------------------------ |
| `channel`  | string    | `twitter`, `email`, `web` ãªã© |
| `message`  | string    | é€šçŸ¥å†…å®¹                       |
| `sent_at`  | timestamp | é€ä¿¡æ™‚åˆ»                       |

---

## ğŸ§  ãã®ä»–ã®è£œåŠ©æ§‹é€ ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

| æ§‹é€ å                       | èª¬æ˜                                                 |
| ---------------------------- | ---------------------------------------------------- |
| `strategies`ï¼ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ | åˆ©ç”¨å¯èƒ½ãªæˆ¦ç•¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿           |
| `agent_logs`                 | Bot ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¨ãƒ©ãƒ¼ãƒ»æˆåŠŸãƒ­ã‚°è¨˜éŒ²ï¼ˆåˆ†æç”¨ï¼‰     |
| `event_logs`                 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® UI æ“ä½œãƒ­ã‚°ï¼ˆãƒœã‚¿ãƒ³æŠ¼ä¸‹ã€ãƒšãƒ¼ã‚¸é·ç§»ãªã©ï¼‰ |

---

## âœ… ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆãƒãƒªã‚·ãƒ¼

- èª­ã¿è¾¼ã¿æœ€é©åŒ–ï¼š`nfts/{nftId}/tx_logs` ã®ã‚ˆã†ã«ã‚µãƒ–ã‚³ãƒ¬ã§æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’æ•´ç†
- åˆ†é›¢è¨­è¨ˆï¼šè³‡ç”£ç®¡ç†ï¼ˆwalletï¼‰ã¨æŠ•è³‡ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆmetadataï¼‰ã¯è²¬å‹™ã‚’åˆ†é›¢
- æ›¸ãè¾¼ã¿æ¨©é™åˆ¶å¾¡ï¼šCloud Functions çµŒç”±ã§ Agent ã®ã¿ãŒæ›¸ã‘ã‚‹æ§‹é€ ã«
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ Privy ã® ID ã«çµ±ä¸€ï¼ˆSui ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã¨åˆ†é›¢ï¼‰
